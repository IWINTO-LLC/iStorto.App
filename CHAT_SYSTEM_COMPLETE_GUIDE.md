# ูุธุงู ุงูุฏุฑุฏุดุฉ ุงููุงูู - ุฏููู ุดุงูู ๐

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅูุดุงุก ูุธุงู ุฏุฑุฏุดุฉ ุงุญุชุฑุงูู ูุงูู ููุชุทุจูู ูุฏุนู ุงููุญุงุฏุซุงุช ุจูู ุงููุณุชุฎุฏููู ูุงูุชุฌุงุฑ ูุน ููุฒุงุช ูุชูุฏูุฉ ูุซู ุญุงูุฉ ุงููุฑุงุกุฉุ ุงูุฃุฑุดูุฉุ ุงูููุถูุฉุ ูุงูุจุญุซ.

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ๐

#### ุงูุฌุฏุงูู:
- **`conversations`**: ุฌุฏูู ุงููุญุงุฏุซุงุช ุงูุฑุฆูุณู
- **`messages`**: ุฌุฏูู ุงูุฑุณุงุฆู
- **`conversations_with_details`**: View ููุนุฑุถ ุงููุญุณู
- **`messages_with_sender_details`**: View ููุฑุณุงุฆู ูุน ุชูุงุตูู ุงููุฑุณู

#### ุงูููุฒุงุช:
- โ ุฏุนู ุงูุฑุณุงุฆู ุงููุตูุฉ ูุงูุตูุฑ ูุงููููุงุช ูุงููููุน
- โ ุญุงูุฉ ุงููุฑุงุกุฉ (ููุฑูุก/ุบูุฑ ููุฑูุก)
- โ ุงูุฃุฑุดูุฉ ูุงูููุถูุฉ ููุชู ุงูุตูุช
- โ ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- โ Real-time updates
- โ RLS Policies ููุฃูุงู

### 2. Models ๐

#### `ConversationModel`:
```dart
- id, userId, vendorId
- lastMessageId, lastMessageText, lastMessageAt
- isArchived, isFavorite, isMuted
- userUnreadCount, vendorUnreadCount
- lastReadByUserAt, lastReadByVendorAt
- ุชูุงุตูู ุฅุถุงููุฉ ูู JOIN
```

#### `MessageModel`:
```dart
- id, conversationId, senderId, senderType
- messageText, messageType
- attachmentUrl, attachmentName, attachmentSize
- isRead, readAt
- replyToMessageId
- ุชูุงุตูู ุงููุฑุณู
```

### 3. Repository ๐๏ธ

#### `ChatRepository`:
- โ `getUserConversations()` - ูุญุงุฏุซุงุช ุงููุณุชุฎุฏู
- โ `getVendorConversations()` - ูุญุงุฏุซุงุช ุงูุชุงุฌุฑ
- โ `getOrCreateConversation()` - ุฅูุดุงุก/ุงูุญุตูู ุนูู ูุญุงุฏุซุฉ
- โ `getConversationMessages()` - ุฑุณุงุฆู ุงููุญุงุฏุซุฉ
- โ `sendMessage()` - ุฅุฑุณุงู ุฑุณุงูุฉ
- โ `markMessagesAsRead()` - ุชูููุฒ ูููุฑูุก
- โ `updateConversationStatus()` - ุชุญุฏูุซ ุญุงูุฉ ุงููุญุงุฏุซุฉ
- โ `searchConversations()` - ุงูุจุญุซ ูู ุงููุญุงุฏุซุงุช
- โ `searchMessages()` - ุงูุจุญุซ ูู ุงูุฑุณุงุฆู
- โ Real-time listeners

### 4. Services & Controllers ๐ฎ

#### `ChatService`:
- โ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงููุญููุฉ
- โ Real-time updates
- โ ุชุญููู ุงููุญุงุฏุซุงุช ูุงูุฑุณุงุฆู
- โ ุฅุฑุณุงู ุงูุฑุณุงุฆู
- โ ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุฑุงุกุฉ

#### `ChatController`:
- โ ุฅุฏุงุฑุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู
- โ ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ ุฅุฑุณุงู ุงูุฑุณุงุฆู
- โ ุฅุฏุงุฑุฉ ุงูุชูุฑูุฑ
- โ ุชูุณูู ุงูููุช ูุงูุชุงุฑูุฎ

### 5. ูุงุฌูุงุช ุงููุณุชุฎุฏู ๐จ

#### `ChatListScreen`:
- โ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช
- โ ุงูุจุญุซ ูุงูููุชุฑุฉ (ุงูููุ ุงูููุถูุฉุ ุงููุคุฑุดู)
- โ ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- โ ูุงุฆูุฉ ุฎูุงุฑุงุช ููู ูุญุงุฏุซุฉ
- โ RefreshIndicator

#### `ChatScreen`:
- โ ุนุฑุถ ุงูุฑุณุงุฆู
- โ ุฅุฑุณุงู ุงูุฑุณุงุฆู
- โ ุญุงูุฉ ุงููุฑุงุกุฉ ูุซู ูุงุชุณุงุจ
- โ ุฏุนู ุงููุฑููุงุช
- โ ูุคุดุฑ ุงููุชุงุจุฉ
- โ ุญุงูุฉ ุงูุงุชุตุงู

### 6. Widgets ุงููุชุฎุตุตุฉ ๐งฉ

#### `MessageStatusWidget`:
- โ ุนุฑุถ ุญุงูุฉ ุงูุฑุณุงูุฉ (ูุฑุณูุ ูุณููุ ููุฑูุก)
- โ ุชูุณูู ุงูููุช
- โ ุฃููููุงุช ุงูุญุงูุฉ

#### `OnlineStatusWidget`:
- โ ุญุงูุฉ ุงูุงุชุตุงู (ูุชุตู/ุบูุฑ ูุชุตู)
- โ ุขุฎุฑ ุธููุฑ

#### `TypingIndicatorWidget`:
- โ ูุคุดุฑ ุงููุชุงุจุฉ
- โ ุฑุณูู ูุชุญุฑูุฉ

#### `UnreadCountWidget`:
- โ ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- โ ุชุตููู ุฃููู

#### `AttachmentStatusWidget`:
- โ ุญุงูุฉ ุงููุฑููุงุช
- โ ุดุฑูุท ุงูุชูุฏู ููุฑูุน

### 7. ุงูุชูุงูู ูุน ุงูุชุทุจูู ๐

#### ูู `ProfileMenuWidget`:
```dart
_buildMenuItem(
  icon: Icons.chat,
  title: 'chats'.tr,
  subtitle: 'conversations'.tr,
  onTap: () => Get.to(() => const ChatListScreen()),
),
```

#### ูู `MarketHeader`:
```dart
Widget _buildChatButton(String vendorId) {
  // ุฒุฑ ุงููุญุงุฏุซุฉ ูุน ุงูุชุงุฌุฑ
  // ุจุฏุก ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ ุฃู ูุชุญ ูุญุงุฏุซุฉ ููุฌูุฏุฉ
}
```

### 8. ุงูุชุฑุฌูุงุช ๐

#### ุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ:
- โ ุฌููุน ูุตูุต ุงูุฏุฑุฏุดุฉ
- โ ุฑุณุงุฆู ุงูุฎุทุฃ ูุงููุฌุงุญ
- โ ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช
- โ ุญุงูุงุช ุงูุฑุณุงุฆู
- โ ุฅุนุฏุงุฏุงุช ุงููุญุงุฏุซุฉ

## ุงูููุฒุงุช ุงููุชูุฏูุฉ โก

### 1. ุญุงูุฉ ุงููุฑุงุกุฉ ูุซู ูุงุชุณุงุจ:
- โ โ (ูุฑุณู)
- โ โโ (ูุณูู)
- โ โโ (ุฃุฒุฑู) (ููุฑูุก)

### 2. ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช:
- โ ุงูุฃุฑุดูุฉ
- โ ุงูููุถูุฉ
- โ ูุชู ุงูุตูุช
- โ ุงูุจุญุซ
- โ ุงูุญุฐู

### 3. ุฃููุงุน ุงูุฑุณุงุฆู:
- โ ูุต
- โ ุตูุฑุฉ
- โ ููู
- โ ูููุน
- โ ุฑุฏ ุนูู ุฑุณุงูุฉ

### 4. Real-time Features:
- โ ุชุญุฏูุซ ููุฑู ููุฑุณุงุฆู
- โ ูุคุดุฑ ุงููุชุงุจุฉ
- โ ุญุงูุฉ ุงูุงุชุตุงู
- โ ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ

## ุฎุทูุงุช ุงูุชุทุจูู ๐๏ธ

### 1. ุชุดุบูู ุณูุฑูุจุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
-- ุชุดุบูู ุงูููู
create_chat_system_tables.sql
```

### 2. ุฅุถุงูุฉ Dependencies:
```yaml
dependencies:
  google_maps_flutter: ^2.5.3
  # ุจุงูู dependencies ููุฌูุฏุฉ
```

### 3. ุชุณุฌูู Controllers:
```dart
// ูู main.dart ุฃู ุนูุฏ ุงูุญุงุฌุฉ
Get.put(ChatService());
Get.put(ChatController());
```

### 4. ุฅุถุงูุฉ Routes:
```dart
GetPage(
  name: '/chat-list',
  page: () => const ChatListScreen(),
),
GetPage(
  name: '/chat',
  page: () => ChatScreen(conversation: conversation),
),
```

## ุงูุงุณุชุฎุฏุงู ๐ฑ

### ูููุณุชุฎุฏููู:
1. **ุงููุตูู ูููุญุงุฏุซุงุช**: ูู ุงูููู ุงูุดุฎุตู โ ุงููุญุงุฏุซุงุช
2. **ุจุฏุก ูุญุงุฏุซุฉ**: ูู ุตูุญุฉ ุงูุชุงุฌุฑ โ ุฒุฑ "Chat"
3. **ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช**: ุทูููุฉ ุงูุถุบุท โ ุฎูุงุฑุงุช

### ููุชุฌุงุฑ:
1. **ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช**: ููุณ ูุงุฌูุฉ ุงููุณุชุฎุฏููู
2. **ุงูุฑุฏ ุนูู ุงูุนููุงุก**: ุฅุฑุณุงู ุฑุณุงุฆู ูู ุฎูุงู ููุณ ุงููุธุงู
3. **ุชุชุจุน ุงูุฑุณุงุฆู**: ุญุงูุฉ ุงููุฑุงุกุฉ ูุงูุนุฏุงุฏุงุช

## ุงูุฃูุงู ๐

### RLS Policies:
- โ ุงููุณุชุฎุฏููู ูุฑูู ูุญุงุฏุซุงุชูู ููุท
- โ ุงูุชุฌุงุฑ ูุฑูู ูุญุงุฏุซุงุช ูุชุงุฌุฑูู ููุท
- โ ุญูุงูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู

### ุงูุจูุงูุงุช:
- โ ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- โ ุญูุงูุฉ ุงููุฑููุงุช
- โ ุงูุชุญูู ูู ุงูุฃุฐููุงุช

## ุงูุฃุฏุงุก ๐

### ุงูุชุญุณููุงุช:
- โ Lazy loading ููุฑุณุงุฆู
- โ Pagination
- โ Caching ูุญูู
- โ Real-time ูุญุฏูุฏ

### ุงููุฑุงูุจุฉ:
- โ ุชุชุจุน ุงูุฃุฎุทุงุก
- โ ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
- โ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

## ุงูุตูุงูุฉ ูุงูุชุทููุฑ ๐ง

### ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ:
1. **ููุงููุงุช ุตูุชูุฉ/ููุฏูู**
2. **ุงูุฑุฏูุฏ ุงูุณุฑูุนุฉ**
3. **ุงูููุตูุงุช**
4. **ุงูุจุซ ุงููุจุงุดุฑ**

### ุชุญุณููุงุช ูุณุชูุจููุฉ:
1. **Push Notifications**
2. **ุชุดููุฑ End-to-End**
3. **ุงูุฑุณุงุฆู ุงููุคูุชุฉ**
4. **ุงููุฌููุนุงุช**

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ๐

### ูุดุงูู ุดุงุฆุนุฉ:
1. **ุนุฏู ุชุญููู ุงููุญุงุฏุซุงุช**: ุชุญูู ูู RLS Policies
2. **ุนุฏู ูุตูู ุงูุฑุณุงุฆู**: ุชุญูู ูู Real-time listeners
3. **ูุดุงูู ูู ุงููุฑููุงุช**: ุชุญูู ูู Storage permissions

### ุญููู:
1. **ุฅุนุงุฏุฉ ุชุณุฌูู Controllers**
2. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
3. **ูุณุญ Cache ุงูุชุทุจูู**

## ุงูุฎูุงุตุฉ โจ

ุชู ุฅูุดุงุก ูุธุงู ุฏุฑุฏุดุฉ ุงุญุชุฑุงูู ูุงูู ูุฏุนู:
- โ ุงููุญุงุฏุซุงุช ุงููุฑุฏูุฉ
- โ ุญุงูุฉ ุงููุฑุงุกุฉ ุงููุชูุฏูุฉ
- โ ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช
- โ ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ Real-time updates
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ
- โ ุฃูุงู ูุชูุฏู
- โ ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููููู ุชูุณูุนู ุจุณูููุฉ ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ! ๐
