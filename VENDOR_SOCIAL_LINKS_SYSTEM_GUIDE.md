# 📱 نظام إدارة روابط التواصل الاجتماعي للتجار

## 🎯 نظرة عامة

تم إنشاء نظام شامل لإدارة روابط التواصل الاجتماعي والعمل للتجار، يتيح للتجار إضافة وتعديل روابط التواصل الخاصة بهم مع إمكانية تفعيل أو إلغاء تفعيل كل رابط بشكل منفصل.

---

## 📋 الميزات المنجزة

### ✅ **1. نموذج البيانات**
- **الملف:** `lib/featured/shop/model/vendor_social_links_model.dart`
- **الميزات:**
  - نموذج بيانات شامل مع جميع الحقول المطلوبة
  - دوال التحويل من وإلى Map
  - دالة `copyWith` للتحديثات الجزئية
  - معالجة آمنة للبيانات الديناميكية

### ✅ **2. صفحة إدارة روابط التواصل**
- **الملف:** `lib/featured/shop/view/vendor_social_links_page.dart`
- **الميزات:**
  - تصميم مشابه للصورة المطلوبة
  - 3 أقسام منفصلة:
    - **المعلومات الشخصية:** الموقع الإلكتروني، البريد الإلكتروني
    - **معلومات العمل:** واتساب، الهاتف، الموقع
    - **الروابط الاجتماعية:** لينكد إن، يوتيوب
  - سويتش لتفعيل/إلغاء تفعيل كل رابط
  - حقول نصية لكتابة الروابط
  - أيقونات FontAwesome احترافية
  - زر حفظ مع رسالة نجاح

### ✅ **3. قاعدة البيانات**
- **الملف:** `create_vendor_social_links_table.sql`
- **الميزات:**
  - جدول `vendor_social_links` مع جميع الحقول المطلوبة
  - فهارس محسّنة للأداء
  - Row Level Security (RLS) مفعل
  - سياسات أمان للتجار والعملاء
  - Functions مساعدة لإدارة الروابط
  - Trigger لإنشاء روابط افتراضية عند إنشاء تاجر جديد
  - منع تكرار نفس نوع الرابط للتاجر الواحد

### ✅ **4. التكامل مع قائمة إدارة التاجر**
- **الملف:** `lib/views/vendor/vendor_admin_zone.dart`
- **الميزات:**
  - إضافة رابط "روابط التواصل" في قائمة إدارة التاجر
  - أيقونة مناسبة ووصف واضح
  - انتقال سلس مع انيميشن

### ✅ **5. الترجمات**
- **الملفات:** `lib/translations/ar.dart`, `lib/translations/en.dart`
- **الميزات:**
  - ترجمات عربية وإنجليزية شاملة
  - جميع النصوص والرسائل مترجمة
  - دعم التبديل بين اللغات

---

## 🗄️ هيكل قاعدة البيانات

### جدول `vendor_social_links`

```sql
CREATE TABLE vendor_social_links (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    vendor_id UUID NOT NULL REFERENCES vendors(id) ON DELETE CASCADE,
    link_type VARCHAR(50) NOT NULL, -- أنواع الروابط
    link_value TEXT NOT NULL DEFAULT '',
    is_active BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    UNIQUE(vendor_id, link_type) -- منع التكرار
);
```

### أنواع الروابط المدعومة

| النوع | الوصف | الأيقونة |
|-------|--------|----------|
| `website` | الموقع الإلكتروني | 🌐 Globe |
| `email` | البريد الإلكتروني | 📧 Envelope |
| `whatsapp` | واتساب | 💬 WhatsApp |
| `phone` | الهاتف | 📞 Phone |
| `location` | الموقع | 📍 Location |
| `linkedin` | لينكد إن | 💼 LinkedIn |
| `youtube` | يوتيوب | 📺 YouTube |

---

## 🔧 Functions المساعدة

### 1. إنشاء الروابط الافتراضية
```sql
CREATE OR REPLACE FUNCTION create_default_vendor_social_links(p_vendor_id UUID)
```

### 2. تحديث رابط تواصل اجتماعي
```sql
CREATE OR REPLACE FUNCTION update_vendor_social_link(
    p_vendor_id UUID,
    p_link_type VARCHAR(50),
    p_link_value TEXT,
    p_is_active BOOLEAN
)
```

### 3. الحصول على روابط التاجر
```sql
CREATE OR REPLACE FUNCTION get_vendor_social_links(p_vendor_id UUID)
```

---

## 🔒 الأمان

### Row Level Security (RLS)
- **التجار:** يمكنهم إدارة روابطهم الخاصة فقط
- **العملاء:** يمكنهم رؤية الروابط النشطة فقط
- **السياسات:** محمية بـ RLS policies

### الحماية من التكرار
- منع إضافة نفس نوع الرابط أكثر من مرة للتاجر الواحد
- استخدام `UNIQUE(vendor_id, link_type)`

---

## 🚀 خطوات التطبيق

### 1. تشغيل سكريبت قاعدة البيانات
```sql
-- تشغيل الملف: create_vendor_social_links_table.sql
-- سيقوم تلقائياً بإنشاء:
-- - الجدول والفهارس
-- - سياسات الأمان
-- - Functions المساعدة
-- - Triggers
-- - الروابط الافتراضية للتجار الموجودين
```

### 2. إضافة الملفات إلى المشروع
```
lib/featured/shop/model/vendor_social_links_model.dart
lib/featured/shop/view/vendor_social_links_page.dart
```

### 3. تحديث الملفات المطلوبة
```
lib/views/vendor/vendor_admin_zone.dart (تم التحديث)
lib/translations/ar.dart (تم التحديث)
lib/translations/en.dart (تم التحديث)
```

---

## 📱 كيفية الاستخدام

### للتجار:
1. **الوصول:** اذهب إلى منطقة إدارة التاجر
2. **اختيار:** اضغط على "روابط التواصل"
3. **التعديل:** أضف الروابط في الحقول المناسبة
4. **التفعيل:** استخدم السويتش لتفعيل الروابط المرئية
5. **الحفظ:** اضغط "حفظ التغييرات"

### للعملاء:
- يمكن للعملاء رؤية الروابط النشطة فقط في صفحة التاجر
- الروابط غير المفعلة مخفية تماماً

---

## 🎨 التصميم

### الألوان والأيقونات:
- **الموقع الإلكتروني:** 🔵 أزرق مع أيقونة Globe
- **البريد الإلكتروني:** 🔴 أحمر مع أيقونة Envelope  
- **واتساب:** 🟢 أخضر مع أيقونة WhatsApp
- **الهاتف:** 🟠 برتقالي مع أيقونة Phone
- **الموقع:** 🔴 أحمر مع أيقونة Location
- **لينكد إن:** 🔵 أزرق مع أيقونة LinkedIn
- **يوتيوب:** 🔴 أحمر مع أيقونة YouTube

### التخطيط:
- 3 أقسام منفصلة مع عناوين واضحة
- كل رابط في كارت منفصل
- سويتش أسود أنيق للتفعيل
- حقول نصية مع حدود ملونة عند التركيز

---

## 🔄 التحديثات المستقبلية

### يمكن إضافة:
- [ ] Repository و Controller للربط بقاعدة البيانات
- [ ] التحقق من صحة الروابط
- [ ] إضافة المزيد من منصات التواصل
- [ ] إحصائيات استخدام الروابط
- [ ] إمكانية ترتيب الروابط
- [ ] إضافة وصف لكل رابط

---

## ✅ الخلاصة

تم إنشاء نظام شامل ومتكامل لإدارة روابط التواصل الاجتماعي للتجار مع:

- ✅ **تصميم احترافي** مشابه للصورة المطلوبة
- ✅ **قاعدة بيانات محسّنة** مع أمان عالي
- ✅ **واجهة سهلة الاستخدام** للتجار والعملاء
- ✅ **ترجمات شاملة** للعربية والإنجليزية
- ✅ **تكامل سلس** مع نظام إدارة التاجر

**النظام جاهز للاستخدام فور تشغيل سكريبت قاعدة البيانات! 🎉**
