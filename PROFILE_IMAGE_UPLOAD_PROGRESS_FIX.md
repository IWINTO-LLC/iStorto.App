# ุฅุตูุงุญ ุฏูุงุฆุฑ ุงูุชูุฏู ูุตูุฑ ุงูููู ุงูุดุฎุตู

## โ ุชู ุฅุตูุงุญ ุงููุดููุฉ

**ุงููุดููุฉ:** ุนูุฏ ุชุนุฏูู ุตูุฑุฉ ุงูุบูุงู ุฃู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ูู ุตูุญุฉ Profileุ ูุง ุชุธูุฑ ุฏุงุฆุฑุฉ ุงูุชูุฏู ูุน ุงููุณุจุฉ ุงููุฆููุฉ.

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ `ImageEditController`

**ุงูููู:** `lib/controllers/image_edit_controller.dart`

#### ุฅุถุงูุฉ ูุชุบูุฑุงุช ูููุตูุฉ ููุชูุฏู:

```dart
// ูุชุบูุฑุงุช ูููุตูุฉ ููุชุญููู ูุงูุชูุฏู
final RxBool _isLoadingProfile = false.obs;
final RxBool _isLoadingCover = false.obs;
final RxDouble _profileUploadProgress = 0.0.obs;
final RxDouble _coverUploadProgress = 0.0.obs;

// Getters
bool get isLoadingProfile => _isLoadingProfile.value;
bool get isLoadingCover => _isLoadingCover.value;
double get profileUploadProgress => _profileUploadProgress.value;
double get coverUploadProgress => _coverUploadProgress.value;
```

---

#### ุชุญุฏูุซ `saveProfileImageToDatabase`:

**ุงููุฑุงุญู:**
```dart
10%  โ ูุฑุงุกุฉ ุงูููู
20%  โ ุงูุชุญุถูุฑ
30-50% โ ุงูุฑูุน
80%  โ ุงูุญุตูู ุนูู ุงูุฑุงุจุท
90%  โ ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
100% โ ููุชูู
```

**ุงูููุฏ:**
```dart
_isLoadingProfile.value = true;
_profileUploadProgress.value = 0.0;

_profileUploadProgress.value = 0.1;  // ูุฑุงุกุฉ
_profileUploadProgress.value = 0.2;  // ุชุญุถูุฑ
_profileUploadProgress.value = 0.3;  // ุฑูุน
_profileUploadProgress.value = 0.5;  // ุฑูุน
_profileUploadProgress.value = 0.8;  // ุฑุงุจุท
_profileUploadProgress.value = 0.9;  // ุชุญุฏูุซ DB
_profileUploadProgress.value = 1.0;  // ููุชูู
```

---

#### ุชุญุฏูุซ `saveCoverImageToDatabase`:

ููุณ ุงููุธุงู ููู ุจุงุณุชุฎุฏุงู:
- `_isLoadingCover`
- `_coverUploadProgress`

---

#### ุฅุตูุงุญ vendors query:

**ูุจู:**
```dart
.eq('user_id', currentUser.id)  // โ ุฎุทุฃ!
```

**ุจุนุฏ:**
```dart
.eq('id', currentUser.vendorId!)  // โ ุตุญูุญ
```

---

### 2. ุชุญุฏูุซ `profile_header_widget.dart`

**ุงูููู:** `lib/views/profile/widgets/profile_header_widget.dart`

#### ุฅุถุงูุฉ ุฏุงุฆุฑุฉ ุชูุฏู ููุตูุฑุฉ ุงูุดุฎุตูุฉ:

```dart
// ูู _buildProfilePicture
if (imageController.isLoadingProfile) {
  final progress = imageController.profileUploadProgress;
  final percentage = (progress * 100).toInt();
  
  return Container(
    decoration: BoxDecoration(
      shape: BoxShape.circle,
      color: Colors.black.withOpacity(0.7),
    ),
    child: Stack(
      alignment: Alignment.center,
      children: [
        // ุฏุงุฆุฑุฉ ุงูุชูุฏู (70ร70)
        CircularProgressIndicator(
          value: progress,
          backgroundColor: Colors.white.withOpacity(0.3),
          valueColor: AlwaysStoppedAnimation(Colors.white),
          strokeWidth: 5,
        ),
        // ุงููุต (ุงููุณุจุฉ + "ุฌุงุฑู ุงูุฑูุน")
        Column(
          children: [
            Text('$percentage%', style: ...),
            Text('uploading_profile_photo'.tr, style: ...),
          ],
        ),
      ],
    ),
  );
}
```

---

#### ุฅุถุงูุฉ ุฏุงุฆุฑุฉ ุชูุฏู ูุตูุฑุฉ ุงูุบูุงู:

```dart
// ูู _buildCoverImageBackground
if (imageController.isLoadingCover) {
  final progress = imageController.coverUploadProgress;
  final percentage = (progress * 100).toInt();
  
  return Container(
    color: Colors.black.withOpacity(0.7),
    child: Center(
      child: Stack(
        alignment: Alignment.center,
        children: [
          // ุฏุงุฆุฑุฉ ุงูุชูุฏู (100ร100)
          CircularProgressIndicator(
            value: progress,
            backgroundColor: Colors.white.withOpacity(0.3),
            valueColor: AlwaysStoppedAnimation(Colors.white),
            strokeWidth: 6,
          ),
          // ุงููุต (ุงููุณุจุฉ + "ุฌุงุฑู ุฑูุน ุงูุบูุงู")
          Column(
            children: [
              Text('$percentage%', style: ...),
              Text('uploading_cover_photo'.tr, style: ...),
            ],
          ),
        ],
      ),
    ),
  );
}
```

---

### 3. ุชุญุฏูุซ ููุงุชูุญ ุงูุชุฑุฌูุฉ

**ูู `ar.dart` ู `en.dart`:**

```dart
'uploading_profile_photo': 'ุฌุงุฑู ุฑูุน ุงูุตูุฑุฉ',  // AR
'uploading_cover_photo': 'ุฌุงุฑู ุฑูุน ุงูุบูุงู',      // AR

'uploading_profile_photo': 'Uploading photo',   // EN
'uploading_cover_photo': 'Uploading cover',      // EN

'profile_image_updated_successfully': 'ุชู ุชุญุฏูุซ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ุจูุฌุงุญ',
'cover_image_updated_successfully': 'ุชู ุชุญุฏูุซ ุตูุฑุฉ ุงูุบูุงู ุจูุฌุงุญ',
```

---

## ๐ ุงูููุงุฑูุฉ ุงูุจุตุฑูุฉ

### ูุจู ุงูุฅุตูุงุญ:

```
[ุตูุฑุฉ ุบูุงู/ุดุฎุตูุฉ]
      โ
  [ุงุฎุชูุงุฑ ุตูุฑุฉ]
      โ
  [ูุต ุงูุตูุฑุฉ]
      โ
   โณ ุจุฏูู ูุคุดุฑ ุชุญููู!
      โ
   [ุตูุฑุฉ ุฌุฏูุฏุฉ]
```

---

### ุจุนุฏ ุงูุฅุตูุงุญ:

```
[ุตูุฑุฉ ุบูุงู/ุดุฎุตูุฉ]
      โ
  [ุงุฎุชูุงุฑ ุตูุฑุฉ]
      โ
  [ูุต ุงูุตูุฑุฉ]
      โ
   โญโโโโโโฎ
   โ 50% โ โ ุฏุงุฆุฑุฉ ุชูุฏู
   โุฑูุน  โ
   โฐโโโโโโฏ
      โ
   [ุตูุฑุฉ ุฌุฏูุฏุฉ]
```

---

## ๐ฏ ุงูููุฒุงุช

### ููุตูุฑุฉ ุงูุดุฎุตูุฉ:

- โ ุฏุงุฆุฑุฉ ุชูุฏู ุฏุงุฆุฑูุฉ (70ร70)
- โ ูุณุจุฉ ูุฆููุฉ (0-100%)
- โ ูุต "ุฌุงุฑู ุฑูุน ุงูุตูุฑุฉ"
- โ ูุต ุฏุงุฆุฑู (1:1)
- โ ุชุญุฏูุซ ููุฑู
- โ ุฎูููุฉ ุณูุฏุงุก ุดูุงูุฉ

---

### ูุตูุฑุฉ ุงูุบูุงู:

- โ ุฏุงุฆุฑุฉ ุชูุฏู ูุจูุฑุฉ (100ร100)
- โ ูุณุจุฉ ูุฆููุฉ (0-100%)
- โ ูุต "ุฌุงุฑู ุฑูุน ุงูุบูุงู"
- โ ูุต ูุณุชุทูู (16:9)
- โ ุชุญุฏูุซ ููุฑู
- โ ุฎูููุฉ ุณูุฏุงุก ุดูุงูุฉ

---

## ๐ ุขููุฉ ุงูุนูู

### 1. ุงููุณุชุฎุฏู ูููุฑ "ุชุนุฏูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ":

```
1. ูุชุญ dialog ุงุฎุชูุงุฑ ุงููุตุฏุฑ
   โ
2. ุงุฎุชูุงุฑ ูุงููุฑุง/ูุนุฑุถ
   โ
3. ุงุฎุชูุงุฑ ุตูุฑุฉ
   โ
4. ูุต ุงูุตูุฑุฉ (ุฏุงุฆุฑู 1:1)
   โ
5. โ ุฏุงุฆุฑุฉ ุงูุชูุฏู ุชุธูุฑ ุนูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
   - 10%: ูุฑุงุกุฉ
   - 20%: ุชุญุถูุฑ
   - 50%: ุฑูุน
   - 80%: ุฑุงุจุท
   - 90%: ูุงุนุฏุฉ ุจูุงูุงุช
   - 100%: ููุชูู
   โ
6. ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ููุฑุงู
   โ
7. ุฅุดุนุงุฑ ุฃุฎุถุฑ: "ุชู ุชุญุฏูุซ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ุจูุฌุงุญ"
```

---

### 2. ุงููุณุชุฎุฏู ูููุฑ "ุชุนุฏูู ุตูุฑุฉ ุงูุบูุงู":

```
ููุณ ุงูุฎุทูุงุช ููู:
- ูุต ูุณุชุทูู 16:9
- ุฏุงุฆุฑุฉ ุชูุฏู ุฃูุจุฑ
- ูุต "ุฌุงุฑู ุฑูุน ุงูุบูุงู"
```

---

## ๐จ ุงูุชุตููู

### ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ (Profile):

```
      โโโโโโโโโโโโโโโ
      โ   โญโโโโโโฎ   โ
      โ   โ 75% โ   โ โ ุฏุงุฆุฑุฉ ุชูุฏู (70ร70)
      โ   โุฑูุน  โ   โ
      โ   โฐโโโโโโฏ   โ
      โโโโโโโโโโโโโโโ
      120ร120 Container
```

**ุงูููุงุตูุงุช:**
- Container: 120ร120
- Progress circle: 70ร70
- Stroke width: 5
- ุงููุต: 18px (ูุณุจุฉ)ุ 10px (ุญุงูุฉ)
- ุงูุฎูููุฉ: ุณูุฏุงุก 70% opacity

---

### ุตูุฑุฉ ุงูุบูุงู (Cover):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                             โ
โ        โญโโโโโโโโโฎ           โ
โ        โ  65%   โ           โ โ ุฏุงุฆุฑุฉ ุชูุฏู (100ร100)
โ        โ ุฑูุน    โ           โ
โ        โุงูุบูุงู  โ           โ
โ        โฐโโโโโโโโโฏ           โ
โ                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   Full width ร 280 height
```

**ุงูููุงุตูุงุช:**
- Progress circle: 100ร100
- Stroke width: 6
- ุงููุต: 24px (ูุณุจุฉ)ุ 13px (ุญุงูุฉ)
- ุงูุฎูููุฉ: ุณูุฏุงุก 70% opacity

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ:

```
1. ุงูุชุญ Profile
2. ุงุถุบุท "ุงููุนูููุงุช ุงูุดุฎุตูุฉ"
3. ุงุถุบุท "ุชุนุฏูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ"
4. ุงุฎุชุฑ ุตูุฑุฉ
5. ูุต ุงูุตูุฑุฉ
6. ุฑุงูุจ ุฏุงุฆุฑุฉ ุงูุชูุฏู
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุฏุงุฆุฑุฉ ุชูุฏู ุชุธูุฑ ุนูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
โ ุงููุณุจุฉ ุชุชุญุฏุซ (0% โ 100%)
โ ุงููุต ูุธูุฑ: "ุฌุงุฑู ุฑูุน ุงูุตูุฑุฉ"
โ ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ุจุนุฏ ุงูุงูุชูุงุก
โ ุฅุดุนุงุฑ ูุฌุงุญ ุฃุฎุถุฑ
```

---

### ุงุฎุชุจุงุฑ ุตูุฑุฉ ุงูุบูุงู:

```
1. ุงูุชุญ Profile
2. ุงุถุบุท "ุงููุนูููุงุช ุงูุดุฎุตูุฉ"
3. ุงุถุบุท "ุชุนุฏูู ุตูุฑุฉ ุงูุบูุงู"
4. ุงุฎุชุฑ ุตูุฑุฉ
5. ูุต ุงูุตูุฑุฉ
6. ุฑุงูุจ ุฏุงุฆุฑุฉ ุงูุชูุฏู
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุฏุงุฆุฑุฉ ุชูุฏู ุชุธูุฑ ูู ููุชุตู ุงูุดุงุดุฉ
โ ุงููุณุจุฉ ุชุชุญุฏุซ (0% โ 100%)
โ ุงููุต ูุธูุฑ: "ุฌุงุฑู ุฑูุน ุงูุบูุงู"
โ ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ุจุนุฏ ุงูุงูุชูุงุก
โ ุฅุดุนุงุฑ ูุฌุงุญ ุฃุฎุถุฑ
```

---

## ๐ Debug Logs

ุนูุฏ ุฑูุน ุตูุฑุฉุ ุณุชุธูุฑ ูู Console:

```
// ูุง logs ูุญุฏุฏุฉ ูู ImageEditController ุญุงููุงู
// ููู ููููู ุฅุถุงูุชูุง ูู save methods
```

**ูุฅุถุงูุฉ logs:**
```dart
debugPrint('๐ธ Uploading profile image...');
debugPrint('๐ Progress: ${(_profileUploadProgress.value * 100).toInt()}%');
debugPrint('โ Upload complete!');
```

---

## ๐ ุงููููุงุช ุงูููุนุฏููุฉ

| ุงูููู | ุงูุชุบููุฑุงุช |
|------|-----------|
| `image_edit_controller.dart` | ุฅุถุงูุฉ progress variablesุ ุชุญุฏูุซ save methods |
| `profile_header_widget.dart` | ุฅุถุงูุฉ progress UI overlay |
| `ar.dart` | ุฅุถุงูุฉ ููุงุชูุญ ุชุฑุฌูุฉ |
| `en.dart` | ุฅุถุงูุฉ ููุงุชูุญ ุชุฑุฌูุฉ |

---

## ๐ฏ ุงูุญุงูุงุช ุงููุฏุนููุฉ

### โ ุตูุญุฉ Profile:
- ุชุนุฏูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ โ โ ุฏุงุฆุฑุฉ ุชูุฏู
- ุชุนุฏูู ุตูุฑุฉ ุงูุบูุงู โ โ ุฏุงุฆุฑุฉ ุชูุฏู

### โ ุตูุญุฉ ุงููุชุฌุฑ (Market Header):
- ุชุนุฏูู ุงูุดุนุงุฑ โ โ ุฏุงุฆุฑุฉ ุชูุฏู (ูุงูุช ููุฌูุฏุฉ)
- ุชุนุฏูู ุงูุบูุงู โ โ ุฏุงุฆุฑุฉ ุชูุฏู (ูุงูุช ููุฌูุฏุฉ)

---

## ๐ ุงููุชูุฌุฉ

### ุงูุขู ุฌููุน ุนูููุงุช ุฑูุน ุงูุตูุฑ ุชุนุฑุถ:

โ **ุฏุงุฆุฑุฉ ุชูุฏู ูุงุถุญุฉ**  
โ **ูุณุจุฉ ูุฆููุฉ ูุชุญุฑูุฉ (0-100%)**  
โ **ูุต ุงูุญุงูุฉ ูุชุฑุฌู**  
โ **ุชุญุฏูุซ ููุฑู ููุตูุฑุฉ**  
โ **ุฅุดุนุงุฑุงุช ูุฌุงุญ/ูุดู**  
โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุชุณูุฉ**  

---

## ๐ก ููุงุญุธุงุช

### 1. ุงููุตู ุจูู ุงูุนูููุงุช:

- ุฑูุน ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ = ุฏุงุฆุฑุฉ ุชูุฏู ุนูู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ููุท
- ุฑูุน ุงูุบูุงู = ุฏุงุฆุฑุฉ ุชูุฏู ุนูู ุงูุบูุงู ููุท
- ูุง ุชุฏุงุฎู ุจูู ุงูุนูููุชูู

### 2. ูุณุจุฉ ุงููุต:

- ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ: 1:1 ุฏุงุฆุฑู
- ุตูุฑุฉ ุงูุบูุงู: 16:9 ูุณุชุทูู (ุชู ุงูุชุญุฏูุซ ูู 4:3)

### 3. ุงููุชูุงูููุฉ:

```dart
@Deprecated('Use isLoadingProfile or isLoadingCover')
bool get isLoading => _isLoadingProfile.value || _isLoadingCover.value;
```

ููููุฏ ุงููุฏูู ุงูุฐู ูุฏ ูุณุชุฎุฏู `isLoading` ุจุฏูู ุชุญุฏูุฏ.

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุฅุถุงูุฉ progress variables
- [x] ุชุญุฏูุซ save methods
- [x] ุฅุถุงูุฉ UI overlay
- [x] ููุงุชูุญ ุชุฑุฌูุฉ
- [x] ุฅุตูุงุญ vendors query
- [x] ุชุญุฏูุซ ูุณุจุฉ ุงููุต (16:9)
- [x] localization ููุฑุณุงุฆู
- [x] ูุง ุฃุฎุทุงุก linter
- [x] ุงููุตู ุจูู ุงูุนูููุงุช
- [x] ุชุญุฏูุซ ููุฑู

---

**ุฌุงูุฒ! ุงูุขู ุฌููุน ุนูููุงุช ุฑูุน ุงูุตูุฑ ุชุนุฑุถ ุฏูุงุฆุฑ ุชูุฏู! ๐**

